<section class="header">

    <button mat-button label class="button-switch-page" (click)="goToNextCategory()">
        <div *ngIf="1 === 1; then leftArrowIcon"></div>
    </button>
    <label class="header-cat">Main Category</label>
    <button mat-button label class="button-switch-page" (click)="goToPrevCategory()">
        <div *ngIf="1 === 1; then rightArrowIcon"></div>
    </button>
</section>
<div *ngIf="(status.loading && !status.loaded) || (!status.loading && !status.loaded); then loading  else loaded"></div>
<ng-template #loaded>

    <div class="mybooks">
        <app-auto-complete [books]="booksNearBy" [(activeOption)]="this.bookSelected" (getBookSelected)="showBookNavbar($event)"
            id="auto-complete"></app-auto-complete>
        <mat-grid-list class="my-books" [cols]="numCols" gutterSize="10" rowHeight="5:8" (window:resize)="onResize()">
            <mat-grid-tile *ngFor="let book of booksNearBy" (click)="showBookNavbar(book)">
                <img class='cover' [ngClass]="{'blurred': (this.bookNavBarEnabled==true && this.bookSelected!==book) , 'regular': (this.bookNavBarEnabled===false || this.isBookEquale(this.bookSelected,book)) }"
                    [attr.src]="book.imagePath" />
            </mat-grid-tile>
        </mat-grid-list>
    </div>
    <div *ngIf="this.bookNavBarEnabled===true; then bookNavbar"></div>

    <ng-template #bookNavbar>
        <div class='bookNavbarBox'>
            <mat-grid-list class="bookNavbarList" rowHeight="56px" cols="2" gutterSize="10">
                <mat-grid-tile item-height="100%">
                    <button mat-icon-button (click)="hideBookNavbar(bookSelected)">
                        <mat-icon svgIcon='down-arrow-black' class="arrow-icon"></mat-icon>
                    </button>
                </mat-grid-tile>
                <mat-grid-tile >

                    <button mat-icon-button class="arrow-icon" (click)="requestBook(bookSelected)">
                        <mat-icon svgIcon='request-book-black'></mat-icon>
                    </button>

                </mat-grid-tile>

            </mat-grid-list>
        </div>
    </ng-template>
</ng-template>

<ng-template #rightArrowIcon>
    <mat-icon svgIcon='right-arrow' class="arrow-icon"></mat-icon>
</ng-template>
<ng-template #leftArrowIcon>
    <mat-icon svgIcon='left-arrow' class="arrow-icon"></mat-icon>
</ng-template>

<ng-template #loading>
    <div class="centered">
        <mat-spinner [color]="'accent'"></mat-spinner>
    </div>
</ng-template>